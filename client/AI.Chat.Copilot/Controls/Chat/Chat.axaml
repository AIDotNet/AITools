<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
             x:Class="AI.Chat.Copilot.Chat"
			 xmlns:rs ="clr-namespace:AI.Chat.Copilot.Resources;assembly=AI.Chat.Copilot"
			  xmlns:sk="clr-namespace:SukiUI.Controls;assembly=SukiUI"
			  xmlns:materialIcons="clr-namespace:Material.Icons.Avalonia;assembly=Material.Icons.Avalonia"
			  xmlns:theme="clr-namespace:SukiUI.Theme;assembly=SukiUI"
			  xmlns:model="using:AI.Chat.Copilot.Domain.Models"
			  xmlns:dataTemplates="using:AI.Chat.Copilot.DataTemplates"
			  xmlns:vm="using:AI.Chat.Copilot.ViewModels"
			  x:DataType="vm:ChatViewModel">
	<UserControl.Styles>
		<Style Selector="TextBox.chatTextBoxStyle">
			<Setter Property="BorderThickness" Value="0"></Setter>
			<Setter Property="BorderBrush" Value="Transparent"/>
			<Setter Property="IsReadOnly" Value="True"/>
			<Setter Property="TextWrapping" Value="Wrap"/>
			<Setter Property="Focusable" Value="False"/>
			<Setter Property="Background" Value="Transparent"></Setter>
			<Setter Property="SelectionBrush" Value="LightBlue"></Setter>
			<Setter Property="SelectionForegroundBrush" Value="Black"></Setter>
		</Style>
	</UserControl.Styles>
	<UserControl.DataTemplates>
		<dataTemplates:RoleChatTemplateSelector>
			<DataTemplate x:Key="Assistant" DataType="model:AppChatHistories">
				<StackPanel HorizontalAlignment="Left"  Margin="10">
					<Grid  ColumnDefinitions="*,Auto" >
						<Border  Grid.Column="0" Height="30" Width="30" CornerRadius="50" ClipToBounds="True" VerticalAlignment="Top">
							<Image Source="/Assets/AI.png"></Image>
						</Border>
						   <TextBox Grid.Column="1" Margin="10,0,0,0" MaxWidth="600"   CornerRadius="5" Padding="5" MinHeight="50" Background="AntiqueWhite" Text="{Binding Content}" Classes="chatTextBoxStyle">
							</TextBox>
					</Grid>
				</StackPanel>
			</DataTemplate>
			<DataTemplate x:Key="User" DataType="model:AppChatHistories">
				<StackPanel HorizontalAlignment="Right" Margin="10">
					<Grid ColumnDefinitions="Auto,*">
						<Border Grid.Column="1" Height="30" Width="30" CornerRadius="50" ClipToBounds="True" VerticalAlignment="Top">
							<Image Source="/Assets/default-user.png"></Image>
						</Border>
							<TextBox Grid.Column="0" Margin="0,0,10,0" MaxWidth="600"   CornerRadius="5" MinHeight="50" Background="LightGreen" Text="{Binding Content}" Classes="chatTextBoxStyle">
							</TextBox>
					</Grid>
				</StackPanel>
			</DataTemplate>
		</dataTemplates:RoleChatTemplateSelector>
	</UserControl.DataTemplates>
	<DockPanel LastChildFill="True">
		<Border DockPanel.Dock="Top"></Border>
		<sk:GlassCard DockPanel.Dock="Bottom" Padding="0" CornerRadius="1" BorderThickness="0" BorderBrush="LightGray">
			<StackPanel>
				<TextBox Height="100" BorderThickness="0" AcceptsReturn="True" Name="ChatInput" TextWrapping="Wrap"
						 VerticalContentAlignment="Top" Loaded="TextBox_Loaded"/>
				<StackPanel HorizontalAlignment="Right" Margin="0,0,10,10">
					<Button Width="100" Classes="Flat Rounded" Content="发送"/>
				</StackPanel>
			</StackPanel>
		</sk:GlassCard>
		<sk:GlassCard CornerRadius="1" BorderBrush="LightGray">
			<ScrollViewer>
				<StackPanel>
					<ItemsControl x:Name="chats" ItemsSource="{Binding ChatHistories}" ></ItemsControl>
				</StackPanel>     
			</ScrollViewer>
		</sk:GlassCard>
	</DockPanel>
</UserControl>
